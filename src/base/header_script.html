<script>

    function handleInitialTheme(){
        const initialTheme = localStorage.getItem('nanoblog-theme');
        const html = document.documentElement;
        initialTheme === 'dark' ? html.classList.add('theme-dark') : html.classList.add('theme-light');
    }

    function handleThemeSwitch() {
        const html = document.documentElement;
        const themeSwitch = document.getElementById('theme-switch');

        if (html.classList.contains('theme-dark')) {
            // Switch to light theme
            html.classList.replace('theme-dark', 'theme-light');
            localStorage.setItem('nanoblog-theme', 'light');
        } else {
            // Switch to dark theme
            html.classList.replace('theme-light', 'theme-dark');
            localStorage.setItem('nanoblog-theme', 'dark');
        }
    }

    function addThemeSwitch() {
        const themeButton = document.getElementById('theme-switch');
        if (!themeButton) return;
        themeButton.addEventListener('click', handleThemeSwitch);
    }
    (() => {
        handleInitialTheme();
        window.onload = () => {
            addThemeSwitch();
        }
    })();
</script>